# Air Gapped Deployment

Deploy Prediction Guard in completely isolated environments with no external internet access.

## Prerequisites

- **Linux server** (Ubuntu 20.04+ or RHEL 8+)
- **Minimum 32GB RAM** (64GB recommended for large models)
- **500GB+ storage** (1TB+ recommended)
- **Docker** pre-installed or installation package
- **No internet access** required after initial setup

## Create Your Cluster in the Prediction Guard Admin

1. Navigate and login to admin.predictionguard.com
2. View the *Clusters* page and click on **+ Create Cluster** in the top-right.
3. Provide a Cluster Name
4. Enable **Air-Gapped Cluster** option
5. Click **Create Cluster.**

## Installation Instructions

1. Download the air-gapped installation package using the command below or from the link provided by your Prediction Guard account representative.

```bash
curl -f "https://storage.googleapis.com/temp_public_pg/prediction-guard-air-gapped.tgz?alt=media"
```

2. Untar the installation file:
```bash
tar xvzf prediction-guard-air-gapped.tgz
```

3. Run the installer, which will run pre-flight checks to ensure compatible environment:
```bash
sudo ./prediction-guard-air-gapped install --license license.yaml
```

Provide a password for the local admin console. This is rarely used, but can be helpful for updating certain fields for offline clusters. The installer will run through a series of pre-flight checks to ensure compatibility. If any of the pre-flight checks fail, a message will be displayed regarding which checks are failing. Either attempt to address and resolve the issue (some are related to available disk space, performance, etc.) or reach out to your Prediction Guard account representative for assistance. Once the installer has completed, proceed to step 4.

4. Shell into the cluster to run the bootstrap command:
```bash
sudo ./prediction-guard-air-gapped shell
```

5. Retrieve the bootstrap command from [admin.predictionguard.com](https://admin.predictionguard.com) by navigating to Clusters, then clicking the **Deploy** button in the row of the cluster you wish to deploy. Click the **Copy** button above the deploy command and proceed to step 6.

6. Paste the bootstrap command into the terminal where you are shelled into the cluster. This will install your authentication token and begin the initial bootstrapping of Prediction Guard services. After a few minutes, feel free to check the installation by checking the running services:

```bash
docker ps | grep predictionguard
```

You should see running services, including `pg-inside` indicating that the cluster has been successfully installed. The cluster should also show as **Healthy** in the Prediction Guard admin.

7. Deploy any desired AI models from the Models page in the Prediction Guard admin. Pay attention to any settings around number of AI accelerators, CPU and memory allocation to the model and ensure it fits within your air-gapped environment.

