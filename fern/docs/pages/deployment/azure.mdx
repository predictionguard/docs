# Azure Deployment

Deploy Prediction Guard on Microsoft Azure using our managed Kubernetes deployment.

## Prerequisites

- **Azure subscription** with appropriate permissions
- **Azure CLI** installed and configured
- **kubectl** configured for your AKS cluster
- **Access to admin panel** at admin.predictionguard.com

## Deployment Process

### 1. Create AKS Cluster

First, create an Azure Kubernetes Service cluster:

```bash
# Create resource group
az group create --name predictionguard-rg --location eastus

# Create AKS cluster
az aks create --resource-group predictionguard-rg --name predictionguard-cluster --node-count 3 --node-vm-size Standard_D2s_v3 --enable-addons monitoring --generate-ssh-keys
```

### 2. Configure kubectl

```bash
# Get credentials
az aks get-credentials --resource-group predictionguard-rg --name predictionguard-cluster

# Verify connection
kubectl get nodes
```

### 3. Access Admin Panel

Navigate to [admin.predictionguard.com](https://admin.predictionguard.com) and log in with your credentials.

### 4. Create Cluster in Admin Panel

1. Click **"Create Cluster"** from the dashboard
2. Select **"Advanced"** mode for full configuration
3. Configure your cluster settings:

#### General Settings
- **Cluster Name**: Choose a unique name (e.g., `azure-production-cluster`)
- **Air-Gapped Cluster**: Leave disabled for cloud deployment
- **Image Registry**: Use Azure Container Registry or your preferred registry
- **Hugging Face API Token**: Provide your token for model access
- **Enable Ingress**: Enable for external API access

#### Azure-Specific Configuration
- **Node Pools**: Configure your AKS node pools
- **Storage Classes**: Use Azure Disk CSI driver for persistent volumes
- **Load Balancer**: Configure Azure Load Balancer for ingress
- **Virtual Network**: Specify your VNet and subnet configuration

### 5. Download Prediction Guard Package

Download the Prediction Guard installation package:

```bash
# Download the Azure-specific package
curl -f "https://storage.googleapis.com/temp_public_pg/prediction-guard-azure.tgz?alt=media"
```

### 6. Install Prediction Guard

```bash
# Extract the package
tar xvzf prediction-guard-azure.tgz
cd prediction-guard-azure

# Run the installer with Azure-specific configuration
sudo ./prediction-guard-azure install --license license.yaml --cluster-name predictionguard-cluster
```

### 7. Bootstrap Cluster

Retrieve the bootstrap command from [admin.predictionguard.com](https://admin.predictionguard.com) by navigating to Clusters, then clicking the **Deploy** button for your cluster. Run the bootstrap command:

```bash
# Run the bootstrap command in your AKS cluster
kubectl apply -f prediction-guard-manifests/
```

### 8. Verify Installation

```bash
# Check running pods
kubectl get pods -n predictionguard

# Verify cluster health
kubectl get nodes
```

## Post-Deployment

### Access Your Cluster

Once deployed, your cluster will be accessible through:

- **Admin Panel**: Monitor and manage from admin.predictionguard.com
- **API Endpoints**: Access your deployed models via the configured endpoints
- **Kubernetes Dashboard**: Use kubectl to manage cluster resources

### Azure Integration

Your deployment will automatically integrate with:

- **Azure Disk**: Persistent storage for models and data
- **Azure Load Balancer**: Load balancing for high availability
- **Azure Monitor**: Monitoring and logging
- **Azure Active Directory**: Service account and role management

---

**Need help?** Contact our support team for assistance with your Azure deployment.
